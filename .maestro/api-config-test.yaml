# API Configuration Test
# This test verifies that the frontend can connect to the backend API
# using the configurable EXPO_PUBLIC_API_PORT environment variable

appId: com.snandur2.glide
---
- launchApp

# Wait for app to load
- waitForAnimationToEnd

# Take initial screenshot
- takeScreenshot: "app-launched"

# Check if we're on the auth screen (login/register)
- assertVisible:
    text: ".*[Ll]og.*|.*[Ss]ign.*|.*[Ee]mail.*|.*[Pp]assword.*"
    optional: true

# Try to navigate to login if not already there
- tapOn:
    text: ".*[Ll]ogin.*|.*[Ss]ign.*[Ii]n.*"
    optional: true

# Test that we can interact with the login screen (indicates API is configured)
- assertVisible:
    text: ".*[Ee]mail.*|.*[Ll]og.*"
    optional: true

# Take screenshot of login screen
- takeScreenshot: "login-screen-api-configured"

# If we got here without network errors, the API configuration is working
- assertNotVisible:
    text: ".*[Nn]etwork.*[Ee]rror.*|.*[Cc]onnection.*[Ff]ailed.*|.*500.*|.*404.*"
